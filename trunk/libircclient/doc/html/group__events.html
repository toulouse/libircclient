<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libirc: Handling IRC events.</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>Handling IRC events.</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structirc__callbacks__t.html">irc_callbacks_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event callbacks structure.  <a href="structirc__callbacks__t.html#_details">More...</a><br></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__events.html#ga0">irc_event_callback_t</a> )(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *event, const char *origin, const char **params, unsigned int count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A most common event callback.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__events.html#ga1">irc_eventcode_callback_t</a> )(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, unsigned int event, const char *origin, const char **params, unsigned int count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A numeric event callback.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__events.html#ga2">irc_event_dcc_chat_t</a> )(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *nick, const char *addr, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A remote DCC CHAT request callback.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__events.html#ga3">irc_event_dcc_send_t</a> )(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *nick, const char *addr, const char *filename, unsigned long size, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A remote DCC CHAT request callback.  <a href="#ga3"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ga0" doxytag="libirc_events.h::irc_event_callback_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(* <a class="el" href="group__events.html#ga0">irc_event_callback_t</a>)(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *event, const char *origin, const char **params, unsigned int count)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A most common event callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td></td><td valign=top><em>event</em>&nbsp;</td><td>the text name of the event. Useful in case you use a single event handler for several events simultaneously. </td></tr>
    <tr><td></td><td valign=top><em>origin</em>&nbsp;</td><td>the originator of the event. See the note below. </td></tr>
    <tr><td></td><td valign=top><em>params</em>&nbsp;</td><td>a list of event params. Depending on the event nature, it could have zero or more params. The actual number of params is specified in count. None of the params can be NULL, but 'params' pointer itself could be NULL for some events. </td></tr>
    <tr><td></td><td valign=top><em>count</em>&nbsp;</td><td>the total number of params supplied.</td></tr>
  </table>
</dl>
Every event generates a callback. This callback is generated by most events. Depending on the event nature, it can provide zero or more params. For each event, the number of provided params is fixed, and their meaning is described.<p>
Every event has origin, though the <em>origin</em> variable may be NULL, which means that event origin is unknown. The origin usually looks like nick!host@ircserver, i.e. like tim!home@irc.krasnogorsk.ru. Such origins can not be used in IRC commands, and need to be stripped (i.e. host and server part should be cut off) before using. This can be done either explicitly, by calling <a class="el" href="group__nnparse.html#ga0">irc_target_get_nick()</a>, or implicitly for all the events - by setting the <a class="el" href="group__options.html#ga1">LIBIRC_OPTION_STRIPNICKS</a> option with <a class="el" href="group__options.html#ga2">irc_option_set()</a>.     </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="libirc_events.h::irc_event_dcc_chat_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(* <a class="el" href="group__events.html#ga2">irc_event_dcc_chat_t</a>)(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *nick, const char *addr, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A remote DCC CHAT request callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td></td><td valign=top><em>nick</em>&nbsp;</td><td>the person who requested DCC CHAT with you. </td></tr>
    <tr><td></td><td valign=top><em>addr</em>&nbsp;</td><td>the person's IP address in decimal-dot notation. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>an id associated with this request. Use it in calls to <a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept()</a> or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline()</a>.</td></tr>
  </table>
</dl>
This callback is called when someone requests DCC CHAT with you. In respond you should call either <a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept()</a> to accept chat request, or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline()</a> to decline chat request.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept</a> or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="libirc_events.h::irc_event_dcc_send_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(* <a class="el" href="group__events.html#ga3">irc_event_dcc_send_t</a>)(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, const char *nick, const char *addr, const char *filename, unsigned long size, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A remote DCC CHAT request callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td></td><td valign=top><em>nick</em>&nbsp;</td><td>the person who requested DCC CHAT with you. </td></tr>
    <tr><td></td><td valign=top><em>addr</em>&nbsp;</td><td>the person's IP address in decimal-dot notation. </td></tr>
    <tr><td></td><td valign=top><em>filename</em>&nbsp;</td><td>the sent filename. </td></tr>
    <tr><td></td><td valign=top><em>size</em>&nbsp;</td><td>the filename size. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>an id associated with this request. Use it in calls to <a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept()</a> or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline()</a>.</td></tr>
  </table>
</dl>
This callback is called when someone wants to send a file to you using DCC SEND. As with chat, in respond you should call either <a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept()</a> to accept this request and receive the file, or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline()</a> to decline this request.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept</a> or <a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="libirc_events.h::irc_eventcode_callback_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(* <a class="el" href="group__events.html#ga1">irc_eventcode_callback_t</a>)(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, unsigned int event, const char *origin, const char **params, unsigned int count)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A numeric event callback. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>the session, which generates an event </td></tr>
    <tr><td></td><td valign=top><em>event</em>&nbsp;</td><td>the numeric code of the event. Useful in case you use a single event handler for several events simultaneously. </td></tr>
    <tr><td></td><td valign=top><em>origin</em>&nbsp;</td><td>the originator of the event. See the note below. </td></tr>
    <tr><td></td><td valign=top><em>params</em>&nbsp;</td><td>a list of event params. Depending on the event nature, it could have zero or more params. The actual number of params is specified in count. None of the params can be NULL, but 'params' pointer itself could be NULL for some events. </td></tr>
    <tr><td></td><td valign=top><em>count</em>&nbsp;</td><td>the total number of params supplied.</td></tr>
  </table>
</dl>
Most times in reply to your actions the IRC server generates numeric callbacks. Most of them are error codes, and some of them mark list start and list stop markers. Every code has its own set of params; for details you can either experiment, or read RFC 1459.<p>
Every event has origin, though the <em>origin</em> variable may be NULL, which means that event origin is unknown. The origin usually looks like nick!host@ircserver, i.e. like tim!home@irc.krasnogorsk.ru. Such origins can not be used in IRC commands, and need to be stripped (i.e. host and server part should be cut off) before using. This can be done either explicitly, by calling <a class="el" href="group__nnparse.html#ga0">irc_target_get_nick()</a>, or implicitly for all the events - by setting the <a class="el" href="group__options.html#ga1">LIBIRC_OPTION_STRIPNICKS</a> option with <a class="el" href="group__options.html#ga2">irc_option_set()</a>.     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Sep 12 17:28:56 2004 for libirc by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
