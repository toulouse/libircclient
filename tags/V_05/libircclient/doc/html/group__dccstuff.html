<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>libircclient: DCC chat/send requests and replies.</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DCC chat/send requests and replies.</h1><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef void(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> )(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> id, int status, void *ctx, const char *data, unsigned int length)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A common DCC callback, used to inform you about the current DCC state or event.  <a href="#ga0"></a><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga1">irc_dcc_chat</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, void *ctx, const char *nick, <a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> callback, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> *dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates a DCC CHAT.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga2">irc_dcc_msg</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid, const char *text)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the message to the specific DCC CHAT.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid, void *ctx, <a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> callback)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Accepts a remote DCC CHAT or DCC RECVFILE request.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declines a remote DCC CHAT or DCC RECVFILE request.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga5">irc_dcc_sendfile</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, void *ctx, const char *nick, const char *filename, <a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> callback, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> *dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a file via DCC.  <a href="#ga5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__dccstuff.html#ga6">irc_dcc_destroy</a> (<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> dccid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroys a DCC session.  <a href="#ga6"></a><br></td></tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ga0" doxytag="libircclient.h::irc_dcc_callback_t" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef void(* <a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a>)(<a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *session, <a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> id, int status, void *ctx, const char *data, unsigned int length)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A common DCC callback, used to inform you about the current DCC state or event. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An IRC session which generates the callback </td></tr>
    <tr><td></td><td valign=top><em>id</em>&nbsp;</td><td>A DCC session id. </td></tr>
    <tr><td></td><td valign=top><em>status</em>&nbsp;</td><td>An error status. 0 means no error, otherwise error code. </td></tr>
    <tr><td></td><td valign=top><em>ctx</em>&nbsp;</td><td>A user-supplied context. </td></tr>
    <tr><td></td><td valign=top><em>data</em>&nbsp;</td><td>Data supplied (if available) </td></tr>
    <tr><td></td><td valign=top><em>length</em>&nbsp;</td><td>data length (if available)</td></tr>
  </table>
</dl>
This callback is called for all DCC functions when state change occurs.<p>
For DCC CHAT, the callback is called in next circumstances:<ul>
<li><em>status</em> is LIBIRC_ERR_CLOSED: connection is closed by remote peer. After returning from the callback, the DCC session is automatically destroyed.</li><li><em>status</em> is neither 0 nor LIBIRC_ERR_CLOSED: socket I/O error (connect error, accept error, recv error, send error). After returning from the callback, the DCC session is automatically destroyed.</li><li><em>status</em> is 0: new chat message received, <em>data</em> contains the message (null-terminated string), <em>length</em> contains the message length.</li></ul>
<p>
For DCC SEND, while file is sending, callback called in next circumstances:<ul>
<li><em>status</em> is neither 0 nor LIBIRC_ERR_CLOSED: socket I/O error (connect error, accept error, recv error, send error). After returning from the callback, the DCC session is automatically destroyed.</li><li><em>status</em> is 0: new data received, <em>data</em> contains the data received, <em>length</em> contains the amount of data received.</li></ul>
<p>
For DCC RECV, while file is sending, callback called in next circumstances:<ul>
<li><em>status</em> is neither 0 nor LIBIRC_ERR_CLOSED: socket I/O error (connect error, accept error, recv error, send error). After returning from the callback, the DCC session is automatically destroyed.</li><li><em>status</em> is 0, and <em>data</em> is 0: file has been received successfully. After returning from the callback, the DCC session is automatically destroyed.</li><li><em>status</em> is 0, and <em>data</em> is not 0: new data received, <em>data</em> contains the data received, <em>length</em> contains the amount of data received. </li></ul>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga3" doxytag="libircclient.h::irc_dcc_accept" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_accept           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>callback</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accepts a remote DCC CHAT or DCC RECVFILE request. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An initiated and connected session. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>A DCC session ID, returned by appropriate callback. </td></tr>
    <tr><td></td><td valign=top><em>ctx</em>&nbsp;</td><td>A user-supplied DCC session context, which will be passed to the DCC callback function. May be NULL. </td></tr>
    <tr><td></td><td valign=top><em>callback</em>&nbsp;</td><td>A DCC callback function, which will be called when anything is said by other party. Must not be NULL.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>.</dd></dl>
This function accepts a remote DCC request - either DCC CHAT or DCC FILE. After the request is accepted, the supplied callback will be called, and you can start sending messages or receiving the file.<p>
This function should be called only after either event_dcc_chat_req or event_dcc_send_req events are generated, and should react to them. It is possible not to call irc_dcc_accept or irc_dcc_decline immediately in callback function - you may just return, and call it later. However, to prevent memory leaks, you must call either irc_dcc_decline or irc_dcc_accept for any incoming DCC request.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga4">irc_dcc_decline</a> event_dcc_chat_req event_dcc_send_req </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="libircclient.h::irc_dcc_chat" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_chat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>nick</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initiates a DCC CHAT. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An initiated and connected session. </td></tr>
    <tr><td></td><td valign=top><em>ctx</em>&nbsp;</td><td>A user-supplied DCC session context, which will be passed to the DCC callback function. May be NULL. </td></tr>
    <tr><td></td><td valign=top><em>nick</em>&nbsp;</td><td>A nick to DCC CHAT with. </td></tr>
    <tr><td></td><td valign=top><em>callback</em>&nbsp;</td><td>A DCC callback function, which will be called when anything is said by other party. Must not be NULL. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>On success, DCC session ID will be stored in this var.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>. Any error, generated by the IRC server, is available through <a class="el" href="structirc__callbacks__t.html#o17">irc_callbacks_t::event_numeric</a>.</dd></dl>
This function requests a DCC CHAT between you and other user. For newbies, DCC chat is like private chat, but it goes directly between two users, and bypasses IRC server. DCC CHAT request must be accepted by other side before you can send anything.<p>
When the chat is accepted, terminated, or some data is received, the callback function is called. See the details in irc_dcc_callback_t declaration.<p>
Possible error responces for this command from the RFC1459:<ul>
<li><a class="el" href="group__rfcnumbers.html#ga91">LIBIRC_RFC_ERR_NORECIPIENT</a></li><li><a class="el" href="group__rfcnumbers.html#ga92">LIBIRC_RFC_ERR_NOTEXTTOSEND</a></li><li><a class="el" href="group__rfcnumbers.html#ga85">LIBIRC_RFC_ERR_CANNOTSENDTOCHAN</a></li><li><a class="el" href="group__rfcnumbers.html#ga106">LIBIRC_RFC_ERR_NOTONCHANNEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga93">LIBIRC_RFC_ERR_NOTOPLEVEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga94">LIBIRC_RFC_ERR_WILDTOPLEVEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga88">LIBIRC_RFC_ERR_TOOMANYTARGETS</a></li><li><a class="el" href="group__rfcnumbers.html#ga82">LIBIRC_RFC_ERR_NOSUCHNICK</a></li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> <a class="el" href="group__dccstuff.html#ga2">irc_dcc_msg</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="libircclient.h::irc_dcc_decline" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_decline           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declines a remote DCC CHAT or DCC RECVFILE request. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An initiated and connected session. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>A DCC session ID, returned by appropriate callback.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>.</dd></dl>
This function declines a remote DCC request - either DCC CHAT or DCC FILE.<p>
This function should be called only after either event_dcc_chat_req or event_dcc_send_req events are generated, and should react to them. It is possible not to call irc_dcc_accept or irc_dcc_decline immediately in callback function - you may just return, and call it later. However, to prevent memory leaks, you must call either irc_dcc_decline or irc_dcc_accept for any incoming DCC request.<p>
Do not use this function to close the accepted or initiated DCC session. Use irc_dcc_destroy instead.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga3">irc_dcc_accept</a> <a class="el" href="structirc__callbacks__t.html#o18">irc_callbacks_t::event_dcc_chat_req</a> <a class="el" href="structirc__callbacks__t.html#o19">irc_callbacks_t::event_dcc_send_req</a> <a class="el" href="group__dccstuff.html#ga6">irc_dcc_destroy</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="libircclient.h::irc_dcc_destroy" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_destroy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys a DCC session. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An initiated and connected session. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>A DCC session ID.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>.</dd></dl>
This function closes the DCC connection (if available), and destroys the DCC session, freeing the used resources. It can be called in any moment, even from callbacks or from different threads.<p>
Note that when DCC session is finished (either with success or failure), you should not destroy it - it will be destroyed automatically.     </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="libircclient.h::irc_dcc_msg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_msg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>text</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the message to the specific DCC CHAT. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An IRC session. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>A DCC session ID, which chat request must have been accepted. </td></tr>
    <tr><td></td><td valign=top><em>text</em>&nbsp;</td><td>Message text. Must not be NULL.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>.</dd></dl>
This function is used to send the DCC CHAT messages. DCC CHAT request must be initiated and accepted first (or just accepted, if initiated by other side).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga1">irc_dcc_chat</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="libircclient.h::irc_dcc_sendfile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int irc_dcc_sendfile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="libircclient_8h.html#a1">irc_session_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>session</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>nick</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="libircclient_8h.html#a3">irc_dcc_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dccid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a file via DCC. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>session</em>&nbsp;</td><td>An initiated and connected session. </td></tr>
    <tr><td></td><td valign=top><em>ctx</em>&nbsp;</td><td>A user-supplied DCC session context, which will be passed to the DCC callback function. May be NULL. </td></tr>
    <tr><td></td><td valign=top><em>nick</em>&nbsp;</td><td>A nick to send file via DCC to. </td></tr>
    <tr><td></td><td valign=top><em>filename</em>&nbsp;</td><td>A file name to sent. Must be an existing file. </td></tr>
    <tr><td></td><td valign=top><em>callback</em>&nbsp;</td><td>A DCC callback function, which will be called when file sent operation is failed, progressed or completed. </td></tr>
    <tr><td></td><td valign=top><em>dccid</em>&nbsp;</td><td>On success, DCC session ID will be stored in this var.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Return code 0 means success. Other value means error, the error code may be obtained through <a class="el" href="group__errors.html#ga0">irc_errno()</a>. Any error, generated by the IRC server, is available through <a class="el" href="structirc__callbacks__t.html#o17">irc_callbacks_t::event_numeric</a>.</dd></dl>
This function generates a DCC SEND request to send the file. When it is accepted, the file is sent to the remote party, and the DCC session is closed. The send operation progress and result can be checked in callback. See the details in irc_dcc_callback_t declaration.<p>
Possible error responces for this command from the RFC1459:<ul>
<li><a class="el" href="group__rfcnumbers.html#ga91">LIBIRC_RFC_ERR_NORECIPIENT</a></li><li><a class="el" href="group__rfcnumbers.html#ga92">LIBIRC_RFC_ERR_NOTEXTTOSEND</a></li><li><a class="el" href="group__rfcnumbers.html#ga85">LIBIRC_RFC_ERR_CANNOTSENDTOCHAN</a></li><li><a class="el" href="group__rfcnumbers.html#ga106">LIBIRC_RFC_ERR_NOTONCHANNEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga93">LIBIRC_RFC_ERR_NOTOPLEVEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga94">LIBIRC_RFC_ERR_WILDTOPLEVEL</a></li><li><a class="el" href="group__rfcnumbers.html#ga88">LIBIRC_RFC_ERR_TOOMANYTARGETS</a></li><li><a class="el" href="group__rfcnumbers.html#ga82">LIBIRC_RFC_ERR_NOSUCHNICK</a></li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__dccstuff.html#ga0">irc_dcc_callback_t</a> </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Oct 10 20:25:06 2004 for libircclient by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
